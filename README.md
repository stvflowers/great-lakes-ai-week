# Great Lakes AI Week 2025

This repository contains code samples and demonstrations for the 2025 Northwest Ohio Great Lakes AI Week presentation, showcasing various Azure AI and OpenAI integrations with Python.

## üìÅ Repository Structure

### Python Files Overview

#### Core Chat and Agent Examples
- **`agent_chat_with_prompty.py`** - AI Foundry Agent service chat completion example with that leverages prompty
- **`agent_chat_with_trace.py`** - AI Foundry Agent service interaction with custom tracing and telemetry
- **`new_agent_example.py`** - Creates a new AI agent with code interpreter tools
- **`new_agent_existing_search_index.py`** - Demonstrates creating an agent with an existing Azure AI Search integration

#### Evaluation and Testing
- **`evaluate_groundedness.py`** - Evaluation framework for testing AI response groundedness using Azure AI evaluation tools
- **`sample_foundry_local.py`** - Example of running a local AI model using Foundry Local Manager

#### Supporting Files
- **`prompts/`** - Directory containing prompt templates:
  - `azure_services_agent.prompty` - Structured prompt for Azure services guidance
  - `ego-assistant.prompty` - Assistant prompt template
  - `playground-prompts.txt` - Sample prompts for testing
- **`ground_sim_output.jsonl`** - Output file generated by the evaluation script
- **`requirements.txt`** - Python dependencies
- **`.env.sample`** - Template for environment variables

## üöÄ Getting Started

### Prerequisites
- Python 3.8 or higher
- Azure subscription with AI services enabled
- Azure CLI installed and configured

### Installation

1. **Clone the repository:**
   ```bash
   git clone https://github.com/stvflowers/great-lakes-ai-week.git
   cd great-lakes-ai-week
   ```

2. **Create a virtual environment:**
   ```bash
   python -m venv venv
   
   # On Windows:
   venv\Scripts\activate
   
   # On macOS/Linux:
   source venv/bin/activate
   ```

3. **Install dependencies:**
   ```bash
   pip install -r requirements.txt
   ```

4. **Set up environment variables:**
   - Copy `.env.sample` to `.env`
   - Fill in the required values (see Configuration section below)

### Configuration

Create a `.env` file from `.env.sample` and configure the following variables:

#### Required for All Examples
- **`PROJECT_ENDPOINT`** - Your Azure AI Foundry project endpoint URL
- **`MODEL_DEPLOYMENT_NAME`** - Name of your deployed model (e.g., "gpt-4", "gpt-35-turbo")

#### Required for Agent Examples
- **`AI_FOUNDRY_AGENT_ID`** - ID of your AI Foundry agent (found in Azure AI Foundry portal)

#### Required for Search Integration
- **`AI_FOUNDRY_WORKSPACE_SEARCH_CONNECTION_NAME`** - Name of your Azure AI Search connection
- **`AI_SEARCH_ENDPOINT`** - Your Azure AI Search service endpoint
- **`AI_SEARCH_KEY`** - Azure AI Search admin key
- **`AI_SEARCH_INDEX_NAME`** - Name of your search index

#### Optional
- **`OPENAI_API_VERSION`** - API version for OpenAI calls (default: "2024-02-15-preview")

### Authentication

The examples use `InteractiveBrowserCredential` for Azure authentication. You'll need to:
1. Install Azure CLI: `az login`
2. Ensure your account has appropriate permissions for Azure AI services

## üìñ Usage Examples

### Basic Chat with Telemetry
```bash
python agent_chat_with_prompty.py
```
Demonstrates basic OpenAI chat completion with Azure Monitor telemetry.

### Advanced Agent with Tracing
```bash
python agent_chat_with_trace.py
```
Shows how to use AI Foundry agents with custom tracing spans.

### Create New Agent
```bash
python new_agent_example.py
```
Creates and interacts with a new AI agent that has code interpreter capabilities.

### Agent with Search
```bash
python new_agent_existing_search_index.py
```
Demonstrates an agent integrated with Azure AI Search for knowledge retrieval.

### Run Evaluations
```bash
python evaluate_groundedness.py
```
Evaluates AI responses for groundedness using Azure's evaluation framework.

### Local Model Testing
```bash
python sample_foundry_local.py
```
Runs a lightweight local model using Foundry Local Manager.

## üîß Key Configuration Notes

### Static Variables Locations
Most configuration is handled through environment variables, but some files contain static variables that may need adjustment:

- **`evaluate_groundedness.py`** (lines 11-13): Contains hardcoded Azure project details
  ```python
  azure_ai_project = {
      "subscription_id": "d6ae69c0-452e-42c6-aee9-a85b76503afc",
      "resource_group": "rg-GreatLakesAIWeek", 
      "workspace_name": "agent-zero",
  }
  ```

- **`agent_chat_with_trace.py`** (line 18): Contains a user identifier for telemetry
  ```python
  user_id = "bandit.heeler@archaeology.au"
  ```

- **`sample_foundry_local.py`** (line 5): Model alias for local execution
  ```python
  alias = "phi-3.5-mini"
  ```

### Telemetry Features
Several examples include OpenTelemetry integration with Azure Monitor for tracking:
- Request/response logging
- Performance metrics
- Error tracking
- Custom span creation

## üõ†Ô∏è Troubleshooting

### Common Issues
1. **Authentication Errors**: Ensure you're logged in via `az login` and have proper permissions
2. **Missing Environment Variables**: Double-check your `.env` file against `.env.sample`
3. **Model Deployment**: Verify your model deployment name matches exactly what's deployed in Azure
4. **Search Index**: Ensure your Azure AI Search service is running and accessible

### Getting Help
- Check Azure AI Foundry portal for agent and model deployment status
- Verify Azure AI Search service health in Azure portal
- Review Azure Monitor logs for detailed error information

## üìù License
This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.
